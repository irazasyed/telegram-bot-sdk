<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Syed Irfaq R.">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Webhook & Updates - Telegram Bot API SDK</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-54567513-6', 'irazasyed.github.io');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Telegram Bot API SDK</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../initial-setup/">Initial Setup</a>
</li>

                        
                            
<li >
    <a href="../available-methods-examples/">Available Methods & Examples</a>
</li>

                        
                            
<li >
    <a href="../async/">Asynchronous Requests</a>
</li>

                        
                            
<li >
    <a href="../commands/">Commands System</a>
</li>

                        
                            
<li >
    <a href="../keyboards/">Keyboards</a>
</li>

                        
                            
<li class="active">
    <a href="./">Webhook & Updates</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../upgrade/">Upgrade Guide</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../api-docs/">API</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../changelog/">Change Log</a>
</li>

                        
                            
<li >
    <a href="../../contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../../license/">License</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../keyboards/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../upgrade/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/irazasyed/telegram-bot-sdk/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#webhook-and-updates">Webhook and Updates</a></li>
        
            <li><a href="#getting-updates">Getting Updates</a></li>
        
            <li><a href="#getting-updates-via-webhook">Getting Updates Via Webhook</a></li>
        
            <li><a href="#getting-updates-manually">Getting Updates Manually</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="webhook-and-updates">Webhook and Updates</h1>
<h2 id="getting-updates">Getting Updates</h2>
<p>There are two mutually exclusive ways of receiving updates for your bot â€” the <code>getUpdates()</code> method on one hand and Webhooks on the other. Incoming updates are stored on the server until the bot receives them either way, but they will not be kept longer than 24 hours.</p>
<p>Regardless of which option you choose, you will receive JSON-serialized Update objects as a result.</p>
<h2 id="getting-updates-via-webhook">Getting Updates Via Webhook</h2>
<p>In order to receive updates via a Webhook, You first need to tell your webhook URL to Telegram. You can use <code>setWebhook($url)</code> method to specify a url and receive incoming updates via an outgoing webhook.</p>
<p>Whenever there is an update for the bot, Telegram will send an HTTPS POST request to the specified url, containing a JSON-serialized Update. In case of an unsuccessful request, Telegram will give up after a reasonable amount of attempts.</p>
<p>If you'd like to make sure that the Webhook request comes from Telegram, we recommend using a secret path in the URL, e.g. <code>https://www.example.com/&lt;token&gt;</code>. Since nobody else knows your bot's token, you can be pretty sure it's Telegram who made the request.</p>
<p>See <a href="https://core.telegram.org/bots/api#setwebhook">setWebhook</a> docs for a list of supported parameters and other info.</p>
<pre><code class="php">// Standalone
$response = $telegram-&gt;setWebhook(['url' =&gt; 'https://example.com/&lt;token&gt;/webhook']);

// Or if you are supplying a self-signed-certificate
$response = $telegram-&gt;setWebhook([
    'url' =&gt; 'https://example.com/&lt;token&gt;/webhook',
    'certificate' =&gt; '/path/to/public_key_certificate.pub'
]);

// Laravel - Setup a POST route.
$response = Telegram::setWebhook(['url' =&gt; 'https://example.com/&lt;token&gt;/webhook']);

// Or if you are supplying a self-signed-certificate
$response = Telegram::setWebhook([
    'url' =&gt; 'https://example.com/&lt;token&gt;/webhook',
    'certificate' =&gt; '/path/to/public_key_certificate.pub'
]);
</code></pre>

<blockquote>
<p><strong>Notes</strong></p>
<ol>
<li>
<p>You will not be able to receive updates using <code>getUpdates()</code> for as long as an outgoing webhook is set up.</p>
</li>
<li>
<p>To use a self-signed certificate, you need to upload your public key certificate using certificate parameter. Please pass the absolute path to the certificate when uploading.</p>
</li>
<li>
<p>Ports currently supported <em>for Webhooks</em>: <strong>443, 80, 88, 8443</strong>.</p>
</li>
</ol>
</blockquote>
<p>Once you set the webhook, You can then use the below function to retrieve the updates that are sent to your Webhook URL. The function returns an array of <code>Update</code> objects.</p>
<pre><code class="php">// Standalone
$updates = $telegram-&gt;getWebhookUpdates();

// Laravel - Put this inside the POST route /&lt;token&gt;/webhook
$updates = Telegram::getWebhookUpdates();
</code></pre>

<h3 id="removing-webhook">Removing Webhook</h3>
<p>To remove a webhook (if it was set before).</p>
<pre><code class="php">// Standalone
$response = $telegram-&gt;removeWebhook();

// Laravel
$response = Telegram::removeWebhook();
</code></pre>

<h2 id="getting-updates-manually">Getting Updates Manually</h2>
<p>You can use <code>getUpdates()</code> method to receive incoming updates using long polling (<a href="http://en.wikipedia.org/wiki/Push_technology#Long_polling">wiki</a>). An Array of Update objects is returned.</p>
<p>See <a href="https://core.telegram.org/bots/api#getupdates">getUpdates</a> docs for a list of supported parameters and other info.</p>
<pre><code class="php">// Standalone
$response = $telegram-&gt;getUpdates();

// Laravel
$response = Telegram::getUpdates();
</code></pre>

<blockquote>
<p><strong>Notes</strong></p>
<ol>
<li>
<p>This method will not work if an outgoing webhook is set up.</p>
</li>
<li>
<p>In order to avoid getting duplicate updates, recalculate <em>offset</em> after each server response.</p>
</li>
</ol>
</blockquote></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Copyright &copy; 2015-16, <a href="https://github.com/irazasyed">Syed Irfaq R.</a> |  <a href="https://irazasyed.github.io/telegram-bot-sdk/api/">API Docs</a></p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
